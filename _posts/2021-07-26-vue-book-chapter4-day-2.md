```
layout: post
title:  "vue.js book 챕터4 주요 개념 day2"
date: 2021-07-26 14:00:21 +0900
categories: vue.js
```

# Vue.js 첫걸음



## Chapter3 - Vue.js 주요 개념



### 3.1 Vue.js 프로그램의 라이프사이클

모든 컴퓨터 프로그램은 실행부터 종료까지 다양한 작업을 한다. 이를 프로그램의 라이프사이클이라고 한다.



보통 소프트웨어 개발 방법론에서 라이프사이클은 소프트웨어의 탄생부터 더 이상 사용하지 않고 폐기 처분할 때까지의 과정을 말한다.



Vue.js 프로그램에서는 Vue 클래스를 사용해서 만들어진 프로그램을 실행하는 동안을 말한다.

vue.js 프로그램의 라이프사이클 안에서는 프로그램이 실행 중임을 브라우저와 사용자에게 알리는 여러 가지 작업을 한다. 기본적으로 라이프사이클 안에서 하는 작업은 개발자나 사용자에게 알리지않고 조용히 실행한다.



---

[이벤트와 라이프 사이클 초기화 작업] -> 데이터를 감시할 수 있도록 변경 -> 

템플릿 마운트 -> 데이터 변경이 발생하면 템플릿 업데이트 -> 

데이터와 이벤트 감시 취소 -> 라이프사이클 종료

---



#### 요약

> 모바일 앱을 비롯하여 일반적으로 애플리케이션이 가지는 생명주기
>
> 인스턴스의 상태에 따라 호출할 수 있는 속성들을 라이플 사이클 속성이라고 하며, 각 라이플 사이클 속성에서 실행되는 커스텀 로직을 **라이프 사이클 훅** 이라고 한다.

#### (다른 설명)

> Vue.js는 Vue 클래스로 생성한 Vue.js 프로그램 라이프사이클의 연겱 ㅗ리를 프로그래머가 제어하거나 볼 수 있게한다. 이 연결 고리는 Vue.js 프로그램에서 제공하며 **훅** 이라고 한다.





---

### 3.2 인스턴스와 컴포넌트

#### 3.2.1 인스턴스



##### 요약

> new Vue()로 인스턴스를 생성할 때 Vue를 생성자라고 한다. vue 생성자는 뷰 라이브러리를 로딩하고 나면 접근할 수 있다.





Vue.js 프로그램은 Vue 클래스를 초기화해 만든 Vue 객체로부터 시작한다. Vue 객체 생성은 new 연산자를 사용한다.

```vue
new Vue({
// 옵션이나 컴포넌트 설정
})
```

생성한 Vue 객체는 Vue.js 프로그램의 최상위 객체로 동작한다. 이 객체를 일반적으로 Vue 인스턴스 or 루트 컴포넌트라고도 한다.



Vue.js 프로그램을 만들 때 가장 먼저 해야 하는 일은 최상위 Vue vm 인스턴스를 생성하는 것이다. Vue.js는 Vue 템플릿과 인스턴스의 속성을 바인딩하고 DOM 이벤트를 Vue 메서드로 전달하도록 하는 등 인스턴스를 생성할 떄 필요한 작업을 실행한다. 이 작업을 다른말로 **부트스트래핑(Bootstrapping)** 이라고 한다. 

```vue
var vm = new Vue({
// 옵션이나 컴포넌트 설정
});
```



최상위 Vue vm을 생성하는 코드로 어떤 작업도 실행하지 않지만 실제 동작한다.



Vue vm의 변수 이름은 자유롭게 지정할 수 있지만 관례로 vm으로 지정한다. 샘플 코드 등을 구현하거나 변수 이름을 지정하기 어려울 때 사용하면 좋다.



**뷰 인스턴스 옵션 속성**

인스턴스를 생성할 때 재정의할 data, el, template 등의 속성을 의미한다.



[❗]
css 선택자 중 # 선택자는 해당 아이디를 가진 돔 요소를 검색할 때 사용한다. 그리고 .선택자는 해당 클래스를 가진 돔 요소를 검색할 때 사용한다.



**뷰 인스턴스의 유효 범위**
뷰 인스턴스를 생성하면 html의 특정 범위 안에서만 옵션 속성들이 적용되어 나타난다. 이를 인스턴스의 유효 범위라고 한다.

---

#### 3.2.2 컴포넌트



Vue.js는 웹 컴포넌트의 모든 규격을 완전히 준수하진 않지만 개발자가 HTML 태그 방식으로 우베 페이지 안에 추가 UI를 덧붙일 수 있는 기능을 제공한다. 이를 **Vue 컴포넌트**라고 한다.



선언 위치에 따라 전역 컴포넌트와 지역 컴포넌트로 나눈다. 컴포넌트는 꼭 Vue 인스턴스나 다른 컴포넌트가 제공하는 템플릿에서만 사용할 수 있고 독자적으로 생성할 수 없다. 







##### 요약

> 컴포넌트란 조합하여 화면을 구성할 수 있는 블록을 의미함



**컴포넌트 등록하기**

1. 지역 컴포넌트 : 특정 인터페이스에서만 유효한 범위를 갖음

2. 전역 컴포넌트 : 여러 인스턴스에서 공통적으로 사용





###### 전역 컴포넌트 등록

```vue
Vue.component('컴포넌트 이름', {
	// 컴포넌트 내용 (옵션)
});
```

전역 컴포넌트에서 모든 인스턴트에 등록하려면 Vue 생성자에서 .component()를 호출하여 수행한다. 컴포넌트 이름은 template 속성에서 사용할 html 사용자 정의 태그(custom tag) 이름을 의미함.



###### 지역 컴포넌트 등록

```vue
new Vue ({
	components: {
		'컴포넌트 이름': 컴포넌트 내용(옵션)
	}
});
```

인스턴스에 components 속성을 추가하고 등록할 컴포넌트 이름과 내용을 정의.





##### 지역 컴포넌트와 전역 컴포넌트의 차이

> 차이를 알기 위해서는 인스턴스 유효 범위를 이해해야 한다. 인스턴스의 유효범위란 HTML의 특정 범위 안에서만 인스턴스의 내용이 유효한 것을 의미한다.





컴포넌트 이름은 Vue.js에서 컴포넌트를 사용하기 위한 태그(컴포넌트 태그) 이름으로도 사용한다.

컴포넌트 이름을 지을 때는 다음과 같은 제약 사항을 지켜야 함.

- 컴포넌트 이름은 영어로 시작해야 하고, 소문자로 구성, 하이픈( - )을 포함할 수 있다.
- 숫자로 시작하지 않는 것에 한정해 컴포넌트 이름의 일부분으로 사용할 수 있다.

단, 컴포넌트 이름은 대소문자를 포함할 수도 있다. 이때는 모든 컴포넌트 이름이 소문자로 변경되고 소문자에서 대문자로 변경되는 위치에 하이픈(-)이 추가되어야 한다.



###### 대소문자를 컴포넌트 이름에 혼용해 사용

```vue
<div id="app">
    <my-component></my-component>
</div>
<script>
Vue.component('myComponent', {
    template: '<span>myComponent 컴포넌트는 my-component로 호출해야 한다.</span>'
});
    
new Vue({
   el: '#app' 
});
    
</script>
```



전역, 지역 컴포넌트를 선언하는 데 사용하는 컴포넌트 옵션은 **리터럴 자바스크립트 객체**값으로 구성한다. 이를 컴포넌트 옵션 객체라고 함. (중괄호를 사용하여 자바스크립트 객체를 구성한 것을 리터럴 객체 또는 리터럴 자바스크립트 객체라고 한다.)



---

### 3.3 템플릿

템플릿은 Vue.js 프로그램의 컴포넌트가 사용하는  HTML DOM 문서 조각이다. 템플릿은 일반적으로 컴포넌트에 있는 데이터를 표시하고 사용자의 행동에 따라 DOM과 Vue.js 프로그램의 이벤트를 호출한다.



템플릿은 Vue.js 프로그램의 데이터를 표시할 때 중괄호 2개를 사용하는 머스태시(Mustache)문법과 Vue.js가 제공하는 디렉티브를 사용할 수 있다. Vue.js 프로그램이 사용하는 템플릿은 일반적으로 비슷하다.

```vue
<div>
    <dl>
        <dt>{{ title }} </dt>
        <dd v-text="description"></dd>
    </dl>
</div>
```

상태(속성) 값 title과 description을 화면에 표시한다.

특수 목적으로 사용하는 Vue 컴포넌트를 제외하면, 템플릿은 template 또는 el 옵션으로 설정해서 사용한다.



### 3.4 옵션, 상태, 데이터

Vue 컴포넌트는 Vue.js 프로그램의 고유 속성과 어떤 동작을 포함하는지 객체 리터럴 형태로 작성한다.

일반적으로 컴포넌트를 선언할 때 Vue 인스턴스(생성자)에 객체 리터럴을 전달 하는 것은 '컴포넌트 고유 속성'을 설정한다는 뜻으로 이해하면 된다.



ex

```vue
// 루트 컴포넌트(Vue 인스턴스)
nwe Vue({
	el: '#app'
});

// 전역 컴포넌트
Vue.component('comp', {
	template: '<span>comp</span>'
})

// 지역 컴포넌트
...
components: {
	'sub_comp': {
		template: '<span>sub_comp</span>'
	}
}
```

컴포넌트 선언에 el, template이라는 옵션을 설정한 예입니다. Vue 컴포넌트의 옵션은 컴포넌트 종류에 따라 조금식 다르고 컴포넌트 하나가 여러 개 옵션을 포함할 수 있다. 그래서 Vue 컴포넌트에 옵션을 전달할 때는 객체 리터럴로 정의해서 전달한다.



컴포넌트 설정을 담은 객체 리터럴은 컴포넌트 성격에 따라 전달 위치가 미묘하게 다르다.

루트 컴포넌트는 Vue 인스턴스의 인자로 전달하고 전역 컴포넌트는 Vue.component 메서드의 두 번째 인자, 지역 컴포넌트는 객체 리터럴의 속성값으로 설정한다.



컴포넌트의 옵션은 성격에 따라 문자열, 숫자, 함수, 객체 리터럴중 하나를 값으로 사용할 수 있다.

그중 함수나 객체 리터럴이 컴포넌트 옵션값으로 전달되는 상황을 이해하기 쉽도록 몇 가지 용어를 사용했다.

옵션값으로 함수를 전달하면 **옵션 함수**라고 한다.





```vue
Vue.component('comp', {
	render: function(h) {
		return h("span", "안녕하세요. Vue입니다.")
    }
});
```

옵션값으로 객체 리터럴을 전달하면 옵션 객체라고 한다. 예를 들어 Vue 인스턴스의 data 옵션값인 객체 리터럴은 아래 코드처럼 사용한다.

```vue
new Vue({
	data: {
		msg: "Hello"
	}
});
```

data 외에 객체 리터럴을 전달받는 옵션으로는 computed, watch, methods 등이 있다. 참고로 전역과 지역 컴포넌트는 Vue 인스턴스와 달리 data 옵션값이 객체 리터럴이 아닌 함수이다. 이 때문에 Vue 인스턴스에 data 옵션을 지칭할 때는 data 옵션 객체라고 하지만 전역과 지역 컴포넌트에서 data 옵션을 지칭할 때는 data 옵션 함수라고 표현한다.



data 옵션 객체는 객체 리터럴인 만큼 속성과 속성값이 주어진다. Vue.js 공식 문서와 이책에서 상태 또는 vue 인스턴스의 데이터라고 표현하는 것은 바로 data 옵션 객체의 속성을 가리키는 말이다. 위 코드를 예로 들면 선언된 '상태'는 msg 하나이다. Vue 컴포넌트는 data 옵션 객체의 값만 인스턴스의 속성 값처럼 확인할 수 있다.

즉, Vue 인스턴스를 vm 변수에 담아두고 msg 상태 값을 가져온다면 vm, msg 형태로 접근할 수 있다.



```vue
new Vue({
	data: {
		name: "Editor"
	},
	computed: { 
		merge_name: function(){
			return "Hong Gil-Dong"
		}
	},
	watch: {
		name: function(new_value, old_value) {	
			// 상태 값이 바뀌었을 때 할 일
		}	
	}
});
```

컴포넌트에 위 코드처럼 computed 옵션 값이 주어지면 컴포넌트에 읽기 전용 속성이 만들어진다.

computed 옵션값은 객체 리터럴을 설정하는데 이때 객체 리터럴의 속성 이름은 computed 옵션의 속성 이름이 된다. 위 코드에서 computed 속성은 merge_name 하나이다. 그리고 컴포넌트의 상태와 마찬가지로 인스턴스 객체에서 인스턴스 고유의 속성인 것처럼 취급한다.



computed 속성값은 프로그램의 필요에 따라 특정 실행 로직과 실행 결과를 포함하므로 계산된 속성이라고 한다.



### 3.5 감시자

일반적으로 Vue 컴포넌트는 컴포넌트에 종속적인 상태와 computed 속성을 포함할 수 있다.

그런데 프로그래머의 필요에 따라 컴포넌트의 상태 값이나 computed 속성값이 변경되었을 때는 컴포넌트에 감시자를 추가할 수 있다. 컴포넌트에 감시자를 추가하려면 watch 옵션 값을 설정한다.



